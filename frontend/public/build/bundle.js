var app=function(){"use strict";function t(){}function e(t){return t()}function s(){return Object.create(null)}function n(t){t.forEach(e)}function o(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let i,a;function u(t,e){return i||(i=document.createElement("a")),i.href=e,t===i.href}function c(t){return null==t?"":t}function l(t,e){t.appendChild(e)}function h(t,e,s){t.insertBefore(e,s||null)}function f(t){t.parentNode.removeChild(t)}function p(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function m(){return d(" ")}function b(t,e,s,n){return t.addEventListener(e,s,n),()=>t.removeEventListener(e,s,n)}function g(t,e,s){null==s?t.removeAttribute(e):t.getAttribute(e)!==s&&t.setAttribute(e,s)}function y(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function _(t,e){t.value=null==e?"":e}function w(t){a=t}const v=[],$=[],x=[],T=[],q=Promise.resolve();let R=!1;function E(t){x.push(t)}const C=new Set;let k=0;function A(){const t=a;do{for(;k<v.length;){const t=v[k];k++,w(t),S(t.$$)}for(w(null),v.length=0,k=0;$.length;)$.pop()();for(let t=0;t<x.length;t+=1){const e=x[t];C.has(e)||(C.add(e),e())}x.length=0}while(v.length);for(;T.length;)T.pop()();R=!1,C.clear(),w(t)}function S(t){if(null!==t.fragment){t.update(),n(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(E)}}const j=new Set;function P(t,e){t&&t.i&&(j.delete(t),t.i(e))}function U(t,s,r,i){const{fragment:a,on_mount:u,on_destroy:c,after_update:l}=t.$$;a&&a.m(s,r),i||E((()=>{const s=u.map(e).filter(o);c?c.push(...s):n(s),t.$$.on_mount=[]})),l.forEach(E)}function D(t,e){const s=t.$$;null!==s.fragment&&(n(s.on_destroy),s.fragment&&s.fragment.d(e),s.on_destroy=s.fragment=null,s.ctx=[])}function N(t,e){-1===t.$$.dirty[0]&&(v.push(t),R||(R=!0,q.then(A)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function L(e,o,r,i,u,c,l,h=[-1]){const p=a;w(e);const d=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:u,bound:s(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o.context||(p?p.$$.context:[])),callbacks:s(),dirty:h,skip_bound:!1,root:o.target||p.$$.root};l&&l(d.root);let m=!1;if(d.ctx=r?r(e,o.props||{},((t,s,...n)=>{const o=n.length?n[0]:s;return d.ctx&&u(d.ctx[t],d.ctx[t]=o)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](o),m&&N(e,t)),s})):[],d.update(),m=!0,n(d.before_update),d.fragment=!!i&&i(d.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);d.fragment&&d.fragment.l(t),t.forEach(f)}else d.fragment&&d.fragment.c();o.intro&&P(e.$$.fragment),U(e,o.target,o.anchor,o.customElement),A()}w(p)}class H{$destroy(){D(this,1),this.$destroy=t}$on(t,e){const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(e),()=>{const t=s.indexOf(e);-1!==t&&s.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}class B extends Error{constructor(t,e,s){const n=`${t.status||0===t.status?t.status:""} ${t.statusText||""}`.trim();super(`Request failed with ${n?`status code ${n}`:"an unknown error"}`),this.name="HTTPError",this.response=t,this.request=e,this.options=s}}class O extends Error{constructor(t){super("Request timed out"),this.name="TimeoutError",this.request=t}}const J=t=>null!==t&&"object"==typeof t,I=(...t)=>{for(const e of t)if((!J(e)||Array.isArray(e))&&void 0!==e)throw new TypeError("The `options` argument must be an object");return Y({},...t)},M=(t={},e={})=>{const s=new globalThis.Headers(t),n=e instanceof globalThis.Headers,o=new globalThis.Headers(e);for(const[t,e]of o.entries())n&&"undefined"===e||void 0===e?s.delete(t):s.set(t,e);return s},Y=(...t)=>{let e={},s={};for(const n of t)if(Array.isArray(n))Array.isArray(e)||(e=[]),e=[...e,...n];else if(J(n)){for(let[t,s]of Object.entries(n))J(s)&&t in e&&(s=Y(e[t],s)),e={...e,[t]:s};J(n.headers)&&(s=M(s,n.headers),e.headers=s)}return e},F="function"==typeof globalThis.AbortController,W="function"==typeof globalThis.ReadableStream,V="function"==typeof globalThis.FormData,z=["get","post","put","patch","head","delete"],G={json:"application/json",text:"text/*",formData:"multipart/form-data",arrayBuffer:"*/*",blob:"*/*"},K=2147483647,Q=Symbol("stop"),X=t=>z.includes(t)?t.toUpperCase():t,Z=[413,429,503],tt={limit:2,methods:["get","put","head","delete","options","trace"],statusCodes:[408,413,429,500,502,503,504],afterStatusCodes:Z,maxRetryAfter:Number.POSITIVE_INFINITY},et=(t={})=>{if("number"==typeof t)return{...tt,limit:t};if(t.methods&&!Array.isArray(t.methods))throw new Error("retry.methods must be an array");if(t.statusCodes&&!Array.isArray(t.statusCodes))throw new Error("retry.statusCodes must be an array");return{...tt,...t,afterStatusCodes:Z}};class st{constructor(t,e={}){var s,n,o;if(this._retryCount=0,this._input=t,this._options={credentials:this._input.credentials||"same-origin",...e,headers:M(this._input.headers,e.headers),hooks:Y({beforeRequest:[],beforeRetry:[],beforeError:[],afterResponse:[]},e.hooks),method:X(null!==(s=e.method)&&void 0!==s?s:this._input.method),prefixUrl:String(e.prefixUrl||""),retry:et(e.retry),throwHttpErrors:!1!==e.throwHttpErrors,timeout:void 0===e.timeout?1e4:e.timeout,fetch:null!==(n=e.fetch)&&void 0!==n?n:globalThis.fetch.bind(globalThis)},"string"!=typeof this._input&&!(this._input instanceof URL||this._input instanceof globalThis.Request))throw new TypeError("`input` must be a string, URL, or Request");if(this._options.prefixUrl&&"string"==typeof this._input){if(this._input.startsWith("/"))throw new Error("`input` must not begin with a slash when using `prefixUrl`");this._options.prefixUrl.endsWith("/")||(this._options.prefixUrl+="/"),this._input=this._options.prefixUrl+this._input}if(F&&(this.abortController=new globalThis.AbortController,this._options.signal&&this._options.signal.addEventListener("abort",(()=>{this.abortController.abort()})),this._options.signal=this.abortController.signal),this.request=new globalThis.Request(this._input,this._options),this._options.searchParams){const t="?"+("string"==typeof this._options.searchParams?this._options.searchParams.replace(/^\?/,""):new URLSearchParams(this._options.searchParams).toString()),e=this.request.url.replace(/(?:\?.*?)?(?=#|$)/,t);!(V&&this._options.body instanceof globalThis.FormData||this._options.body instanceof URLSearchParams)||this._options.headers&&this._options.headers["content-type"]||this.request.headers.delete("content-type"),this.request=new globalThis.Request(new globalThis.Request(e,this.request),this._options)}void 0!==this._options.json&&(this._options.body=JSON.stringify(this._options.json),this.request.headers.set("content-type",null!==(o=this._options.headers.get("content-type"))&&void 0!==o?o:"application/json"),this.request=new globalThis.Request(this.request,{body:this._options.body}))}static create(t,e){const s=new st(t,e),n=async()=>{if(s._options.timeout>K)throw new RangeError("The `timeout` option cannot be greater than 2147483647");await Promise.resolve();let t=await s._fetch();for(const e of s._options.hooks.afterResponse){const n=await e(s.request,s._options,s._decorateResponse(t.clone()));n instanceof globalThis.Response&&(t=n)}if(s._decorateResponse(t),!t.ok&&s._options.throwHttpErrors){let e=new B(t,s.request,s._options);for(const t of s._options.hooks.beforeError)e=await t(e);throw e}if(s._options.onDownloadProgress){if("function"!=typeof s._options.onDownloadProgress)throw new TypeError("The `onDownloadProgress` option must be a function");if(!W)throw new Error("Streams are not supported in your environment. `ReadableStream` is missing.");return s._stream(t.clone(),s._options.onDownloadProgress)}return t},o=s._options.retry.methods.includes(s.request.method.toLowerCase())?s._retry(n):n();for(const[t,n]of Object.entries(G))o[t]=async()=>{s.request.headers.set("accept",s.request.headers.get("accept")||n);const r=(await o).clone();if("json"===t){if(204===r.status)return"";if(e.parseJson)return e.parseJson(await r.text())}return r[t]()};return o}_calculateRetryDelay(t){if(this._retryCount++,this._retryCount<this._options.retry.limit&&!(t instanceof O)){if(t instanceof B){if(!this._options.retry.statusCodes.includes(t.response.status))return 0;const e=t.response.headers.get("Retry-After");if(e&&this._options.retry.afterStatusCodes.includes(t.response.status)){let t=Number(e);return Number.isNaN(t)?t=Date.parse(e)-Date.now():t*=1e3,void 0!==this._options.retry.maxRetryAfter&&t>this._options.retry.maxRetryAfter?0:t}if(413===t.response.status)return 0}return.3*2**(this._retryCount-1)*1e3}return 0}_decorateResponse(t){return this._options.parseJson&&(t.json=async()=>this._options.parseJson(await t.text())),t}async _retry(t){try{return await t()}catch(e){const s=Math.min(this._calculateRetryDelay(e),K);if(0!==s&&this._retryCount>0){await(async t=>new Promise((e=>{setTimeout(e,t)})))(s);for(const t of this._options.hooks.beforeRetry){if(await t({request:this.request,options:this._options,error:e,retryCount:this._retryCount})===Q)return}return this._retry(t)}throw e}}async _fetch(){for(const t of this._options.hooks.beforeRequest){const e=await t(this.request,this._options);if(e instanceof Request){this.request=e;break}if(e instanceof Response)return e}return!1===this._options.timeout?this._options.fetch(this.request.clone()):(async(t,e,s)=>new Promise(((n,o)=>{const r=setTimeout((()=>{e&&e.abort(),o(new O(t))}),s.timeout);s.fetch(t).then(n).catch(o).then((()=>{clearTimeout(r)}))})))(this.request.clone(),this.abortController,this._options)}_stream(t,e){const s=Number(t.headers.get("content-length"))||0;let n=0;return new globalThis.Response(new globalThis.ReadableStream({async start(o){const r=t.body.getReader();e&&e({percent:0,transferredBytes:0,totalBytes:s},new Uint8Array),await async function t(){const{done:i,value:a}=await r.read();if(i)o.close();else{if(e){n+=a.byteLength;e({percent:0===s?0:n/s,transferredBytes:n,totalBytes:s},a)}o.enqueue(a),await t()}}()}}))}}
/*! MIT License © Sindre Sorhus */const nt=t=>{const e=(e,s)=>st.create(e,I(t,s));for(const s of z)e[s]=(e,n)=>st.create(e,I(t,n,{method:s}));return e.create=t=>nt(I(t)),e.extend=e=>nt(I(t,e)),e.stop=Q,e};const ot=nt().extend({credentials:"include",headers:{},hooks:{}});function rt(t,e,s){const n=t.slice();return n[7]=e[s],n}function it(t){let e,s;return{c(){e=p("iframe"),g(e,"title","youtube-video"),g(e,"width",300),g(e,"height",200),u(e.src,s=t[7].video)||g(e,"src",s)},m(t,s){h(t,e,s)},p(t,n){2&n&&!u(e.src,s=t[7].video)&&g(e,"src",s)},d(t){t&&f(e)}}}function at(t){let e,s,n,o,r,i,a,u,b,_=t[7].user+"",w=t[7].text+"",v=t[7].video&&it(t);return{c(){e=p("div"),s=p("div"),n=p("span"),o=d(_),r=d(":\n                        "),i=p("p"),a=d(w),u=m(),v&&v.c(),g(n,"class","svelte-1bmlb"),g(s,"class",b=c(["chat-message","You"===t[7].user?"user":"bot"].join(" "))+" svelte-1bmlb"),g(e,"class","chat-message-wrapper svelte-1bmlb")},m(t,c){h(t,e,c),l(e,s),l(s,n),l(n,o),l(s,r),l(s,i),l(i,a),l(s,u),v&&v.m(s,null)},p(t,e){2&e&&_!==(_=t[7].user+"")&&y(o,_),2&e&&w!==(w=t[7].text+"")&&y(a,w),t[7].video?v?v.p(t,e):(v=it(t),v.c(),v.m(s,null)):v&&(v.d(1),v=null),2&e&&b!==(b=c(["chat-message","You"===t[7].user?"user":"bot"].join(" "))+" svelte-1bmlb")&&g(s,"class",b)},d(t){t&&f(e),v&&v.d()}}}function ut(t){let e;return{c(){e=p("div"),e.innerHTML='<div class="chat-message bot svelte-1bmlb"><span class="svelte-1bmlb">   ...   </span></div>',g(e,"class","chat-message-wrapper svelte-1bmlb")},m(t,s){h(t,e,s)},d(t){t&&f(e)}}}function ct(e){let s,o,r,i,a,c,d,y,w,v,$,x,T,q,R,E,C,k,A=e[1],S=[];for(let t=0;t<A.length;t+=1)S[t]=at(rt(e,A,t));let j=e[0]&&ut();return{c(){s=p("div"),o=p("div"),r=p("div"),i=p("img"),c=m(),d=p("div"),d.textContent=`${e[3].name}`,y=m(),w=p("div"),v=p("div");for(let t=0;t<S.length;t+=1)S[t].c();$=m(),j&&j.c(),x=m(),T=p("div"),q=p("textarea"),R=m(),E=p("button"),E.textContent="=>",u(i.src,a=e[3].image)||g(i,"src",a),g(i,"alt","Bot"),g(i,"class","svelte-1bmlb"),g(r,"class","chat-header-image svelte-1bmlb"),g(d,"class","chat-header-info svelte-1bmlb"),g(o,"class","chat-header svelte-1bmlb"),g(v,"class","chat-content svelte-1bmlb"),g(w,"class","chat-content-wrapper svelte-1bmlb"),g(q,"class","chat-input svelte-1bmlb"),g(E,"class","chat-submit svelte-1bmlb"),g(T,"class","chat-footer svelte-1bmlb"),g(s,"class","chat svelte-1bmlb")},m(t,n){h(t,s,n),l(s,o),l(o,r),l(r,i),l(o,c),l(o,d),l(s,y),l(s,w),l(w,v);for(let t=0;t<S.length;t+=1)S[t].m(v,null);l(v,$),j&&j.m(v,null),l(s,x),l(s,T),l(T,q),_(q,e[2]),l(T,R),l(T,E),C||(k=[b(q,"input",e[6]),b(q,"keydown",e[5]),b(E,"click",e[4])],C=!0)},p(t,[e]){if(2&e){let s;for(A=t[1],s=0;s<A.length;s+=1){const n=rt(t,A,s);S[s]?S[s].p(n,e):(S[s]=at(n),S[s].c(),S[s].m(v,$))}for(;s<S.length;s+=1)S[s].d(1);S.length=A.length}t[0]?j||(j=ut(),j.c(),j.m(v,null)):j&&(j.d(1),j=null),4&e&&_(q,t[2])},i:t,o:t,d(t){t&&f(s),function(t,e){for(let s=0;s<t.length;s+=1)t[s]&&t[s].d(e)}(S,t),j&&j.d(),C=!1,n(k)}}}function lt(t,e,s){const n={name:"Max Mustermann",image:"https://i.ibb.co/d29TyqJ/man-wearing-headset-giving-online-chat-support-attractive-unshaven-young-offering-client-services-he.jpg",url:"https://dialogflow-backend.capr.hand.group"};let o=!1,r=[],i="";function a(){if(!i)return;const t=i;s(2,i=""),s(1,r=[...r,{user:"You",text:t}]),setTimeout((async()=>{s(0,o=!0);let e=(await ot.get(`${n.url}?query=${t}`).json()).queryResult.fulfillmentText,i=!1;e.match(/(?:https?|ftp):\/\/[\n\S]+/g)&&(i=e.match(/\bhttps?:\/\/\S+/gi)[0],e=e.replace(/(?:https?|ftp):\/\/[\n\S]+/g,"")),s(1,r=[...r,{user:n.name,text:e,video:i||!1}]),s(0,o=!1)}),500)}return[o,r,i,n,a,function(t){"Enter"===t.key&&(t.preventDefault(),a())},function(){i=this.value,s(2,i)}]}class ht extends H{constructor(t){super(),L(this,t,lt,ct,r,{})}}function ft(e){let s,n,o;return n=new ht({}),{c(){var t;s=p("main"),(t=n.$$.fragment)&&t.c(),g(s,"class","svelte-eld5wd")},m(t,e){h(t,s,e),U(n,s,null),o=!0},p:t,i(t){o||(P(n.$$.fragment,t),o=!0)},o(t){!function(t,e,s,n){if(t&&t.o){if(j.has(t))return;j.add(t),(void 0).c.push((()=>{j.delete(t),n&&(s&&t.d(1),n())})),t.o(e)}}(n.$$.fragment,t),o=!1},d(t){t&&f(s),D(n)}}}const pt=new class extends H{constructor(t){super(),L(this,t,null,ft,r,{})}}({target:document.body});return pt}();
//# sourceMappingURL=bundle.js.map
