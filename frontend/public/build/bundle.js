var app=function(){"use strict";function t(){}function e(t){return t()}function s(){return Object.create(null)}function o(t){t.forEach(e)}function n(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let i,a;function u(t,e){return i||(i=document.createElement("a")),i.href=e,t===i.href}function c(t){return null==t?"":t}function l(t,e){t.appendChild(e)}function h(t,e,s){t.insertBefore(e,s||null)}function f(t){t.parentNode.removeChild(t)}function p(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function m(){return d(" ")}function g(t,e,s,o){return t.addEventListener(e,s,o),()=>t.removeEventListener(e,s,o)}function y(t,e,s){null==s?t.removeAttribute(e):t.getAttribute(e)!==s&&t.setAttribute(e,s)}function _(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function b(t,e){t.value=null==e?"":e}function v(t){a=t}const w=[],$=[],x=[],T=[],q=Promise.resolve();let R=!1;function E(t){x.push(t)}const C=new Set;let k=0;function A(){const t=a;do{for(;k<w.length;){const t=w[k];k++,v(t),S(t.$$)}for(v(null),w.length=0,k=0;$.length;)$.pop()();for(let t=0;t<x.length;t+=1){const e=x[t];C.has(e)||(C.add(e),e())}x.length=0}while(w.length);for(;T.length;)T.pop()();R=!1,C.clear(),v(t)}function S(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(E)}}const j=new Set;function z(t,e){t&&t.i&&(j.delete(t),t.i(e))}function P(t,s,r,i){const{fragment:a,on_mount:u,on_destroy:c,after_update:l}=t.$$;a&&a.m(s,r),i||E((()=>{const s=u.map(e).filter(n);c?c.push(...s):o(s),t.$$.on_mount=[]})),l.forEach(E)}function U(t,e){const s=t.$$;null!==s.fragment&&(o(s.on_destroy),s.fragment&&s.fragment.d(e),s.on_destroy=s.fragment=null,s.ctx=[])}function D(t,e){-1===t.$$.dirty[0]&&(w.push(t),R||(R=!0,q.then(A)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function N(e,n,r,i,u,c,l,h=[-1]){const p=a;v(e);const d=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:u,bound:s(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(p?p.$$.context:[])),callbacks:s(),dirty:h,skip_bound:!1,root:n.target||p.$$.root};l&&l(d.root);let m=!1;if(d.ctx=r?r(e,n.props||{},((t,s,...o)=>{const n=o.length?o[0]:s;return d.ctx&&u(d.ctx[t],d.ctx[t]=n)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](n),m&&D(e,t)),s})):[],d.update(),m=!0,o(d.before_update),d.fragment=!!i&&i(d.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);d.fragment&&d.fragment.l(t),t.forEach(f)}else d.fragment&&d.fragment.c();n.intro&&z(e.$$.fragment),P(e,n.target,n.anchor,n.customElement),A()}v(p)}class L{$destroy(){U(this,1),this.$destroy=t}$on(t,e){const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(e),()=>{const t=s.indexOf(e);-1!==t&&s.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}class H extends Error{constructor(t,e,s){const o=`${t.status||0===t.status?t.status:""} ${t.statusText||""}`.trim();super(`Request failed with ${o?`status code ${o}`:"an unknown error"}`),this.name="HTTPError",this.response=t,this.request=e,this.options=s}}class B extends Error{constructor(t){super("Request timed out"),this.name="TimeoutError",this.request=t}}const O=t=>null!==t&&"object"==typeof t,J=(...t)=>{for(const e of t)if((!O(e)||Array.isArray(e))&&void 0!==e)throw new TypeError("The `options` argument must be an object");return M({},...t)},I=(t={},e={})=>{const s=new globalThis.Headers(t),o=e instanceof globalThis.Headers,n=new globalThis.Headers(e);for(const[t,e]of n.entries())o&&"undefined"===e||void 0===e?s.delete(t):s.set(t,e);return s},M=(...t)=>{let e={},s={};for(const o of t)if(Array.isArray(o))Array.isArray(e)||(e=[]),e=[...e,...o];else if(O(o)){for(let[t,s]of Object.entries(o))O(s)&&t in e&&(s=M(e[t],s)),e={...e,[t]:s};O(o.headers)&&(s=I(s,o.headers),e.headers=s)}return e},Y="function"==typeof globalThis.AbortController,F="function"==typeof globalThis.ReadableStream,W="function"==typeof globalThis.FormData,V=["get","post","put","patch","head","delete"],G={json:"application/json",text:"text/*",formData:"multipart/form-data",arrayBuffer:"*/*",blob:"*/*"},K=2147483647,Q=Symbol("stop"),X=t=>V.includes(t)?t.toUpperCase():t,Z=[413,429,503],tt={limit:2,methods:["get","put","head","delete","options","trace"],statusCodes:[408,413,429,500,502,503,504],afterStatusCodes:Z,maxRetryAfter:Number.POSITIVE_INFINITY},et=(t={})=>{if("number"==typeof t)return{...tt,limit:t};if(t.methods&&!Array.isArray(t.methods))throw new Error("retry.methods must be an array");if(t.statusCodes&&!Array.isArray(t.statusCodes))throw new Error("retry.statusCodes must be an array");return{...tt,...t,afterStatusCodes:Z}};class st{constructor(t,e={}){var s,o,n;if(this._retryCount=0,this._input=t,this._options={credentials:this._input.credentials||"same-origin",...e,headers:I(this._input.headers,e.headers),hooks:M({beforeRequest:[],beforeRetry:[],beforeError:[],afterResponse:[]},e.hooks),method:X(null!==(s=e.method)&&void 0!==s?s:this._input.method),prefixUrl:String(e.prefixUrl||""),retry:et(e.retry),throwHttpErrors:!1!==e.throwHttpErrors,timeout:void 0===e.timeout?1e4:e.timeout,fetch:null!==(o=e.fetch)&&void 0!==o?o:globalThis.fetch.bind(globalThis)},"string"!=typeof this._input&&!(this._input instanceof URL||this._input instanceof globalThis.Request))throw new TypeError("`input` must be a string, URL, or Request");if(this._options.prefixUrl&&"string"==typeof this._input){if(this._input.startsWith("/"))throw new Error("`input` must not begin with a slash when using `prefixUrl`");this._options.prefixUrl.endsWith("/")||(this._options.prefixUrl+="/"),this._input=this._options.prefixUrl+this._input}if(Y&&(this.abortController=new globalThis.AbortController,this._options.signal&&this._options.signal.addEventListener("abort",(()=>{this.abortController.abort()})),this._options.signal=this.abortController.signal),this.request=new globalThis.Request(this._input,this._options),this._options.searchParams){const t="?"+("string"==typeof this._options.searchParams?this._options.searchParams.replace(/^\?/,""):new URLSearchParams(this._options.searchParams).toString()),e=this.request.url.replace(/(?:\?.*?)?(?=#|$)/,t);!(W&&this._options.body instanceof globalThis.FormData||this._options.body instanceof URLSearchParams)||this._options.headers&&this._options.headers["content-type"]||this.request.headers.delete("content-type"),this.request=new globalThis.Request(new globalThis.Request(e,this.request),this._options)}void 0!==this._options.json&&(this._options.body=JSON.stringify(this._options.json),this.request.headers.set("content-type",null!==(n=this._options.headers.get("content-type"))&&void 0!==n?n:"application/json"),this.request=new globalThis.Request(this.request,{body:this._options.body}))}static create(t,e){const s=new st(t,e),o=async()=>{if(s._options.timeout>K)throw new RangeError("The `timeout` option cannot be greater than 2147483647");await Promise.resolve();let t=await s._fetch();for(const e of s._options.hooks.afterResponse){const o=await e(s.request,s._options,s._decorateResponse(t.clone()));o instanceof globalThis.Response&&(t=o)}if(s._decorateResponse(t),!t.ok&&s._options.throwHttpErrors){let e=new H(t,s.request,s._options);for(const t of s._options.hooks.beforeError)e=await t(e);throw e}if(s._options.onDownloadProgress){if("function"!=typeof s._options.onDownloadProgress)throw new TypeError("The `onDownloadProgress` option must be a function");if(!F)throw new Error("Streams are not supported in your environment. `ReadableStream` is missing.");return s._stream(t.clone(),s._options.onDownloadProgress)}return t},n=s._options.retry.methods.includes(s.request.method.toLowerCase())?s._retry(o):o();for(const[t,o]of Object.entries(G))n[t]=async()=>{s.request.headers.set("accept",s.request.headers.get("accept")||o);const r=(await n).clone();if("json"===t){if(204===r.status)return"";if(e.parseJson)return e.parseJson(await r.text())}return r[t]()};return n}_calculateRetryDelay(t){if(this._retryCount++,this._retryCount<this._options.retry.limit&&!(t instanceof B)){if(t instanceof H){if(!this._options.retry.statusCodes.includes(t.response.status))return 0;const e=t.response.headers.get("Retry-After");if(e&&this._options.retry.afterStatusCodes.includes(t.response.status)){let t=Number(e);return Number.isNaN(t)?t=Date.parse(e)-Date.now():t*=1e3,void 0!==this._options.retry.maxRetryAfter&&t>this._options.retry.maxRetryAfter?0:t}if(413===t.response.status)return 0}return.3*2**(this._retryCount-1)*1e3}return 0}_decorateResponse(t){return this._options.parseJson&&(t.json=async()=>this._options.parseJson(await t.text())),t}async _retry(t){try{return await t()}catch(e){const s=Math.min(this._calculateRetryDelay(e),K);if(0!==s&&this._retryCount>0){await(async t=>new Promise((e=>{setTimeout(e,t)})))(s);for(const t of this._options.hooks.beforeRetry){if(await t({request:this.request,options:this._options,error:e,retryCount:this._retryCount})===Q)return}return this._retry(t)}throw e}}async _fetch(){for(const t of this._options.hooks.beforeRequest){const e=await t(this.request,this._options);if(e instanceof Request){this.request=e;break}if(e instanceof Response)return e}return!1===this._options.timeout?this._options.fetch(this.request.clone()):(async(t,e,s)=>new Promise(((o,n)=>{const r=setTimeout((()=>{e&&e.abort(),n(new B(t))}),s.timeout);s.fetch(t).then(o).catch(n).then((()=>{clearTimeout(r)}))})))(this.request.clone(),this.abortController,this._options)}_stream(t,e){const s=Number(t.headers.get("content-length"))||0;let o=0;return new globalThis.Response(new globalThis.ReadableStream({async start(n){const r=t.body.getReader();e&&e({percent:0,transferredBytes:0,totalBytes:s},new Uint8Array),await async function t(){const{done:i,value:a}=await r.read();if(i)n.close();else{if(e){o+=a.byteLength;e({percent:0===s?0:o/s,transferredBytes:o,totalBytes:s},a)}n.enqueue(a),await t()}}()}}))}}
/*! MIT License © Sindre Sorhus */const ot=t=>{const e=(e,s)=>st.create(e,J(t,s));for(const s of V)e[s]=(e,o)=>st.create(e,J(t,o,{method:s}));return e.create=t=>ot(J(t)),e.extend=e=>ot(J(t,e)),e.stop=Q,e};const nt=ot().extend({credentials:"include",headers:{},hooks:{}});function rt(t,e,s){const o=t.slice();return o[7]=e[s],o}function it(t){let e,s;return{c(){e=p("iframe"),y(e,"title","youtube-video"),y(e,"width",300),y(e,"height",200),u(e.src,s=t[7].video)||y(e,"src",s)},m(t,s){h(t,e,s)},p(t,o){2&o&&!u(e.src,s=t[7].video)&&y(e,"src",s)},d(t){t&&f(e)}}}function at(t){let e,s,o,n,r,i,a,u,g,b=t[7].user+"",v=t[7].text+"",w=t[7].video&&it(t);return{c(){e=p("div"),s=p("div"),o=p("span"),n=d(b),r=d(":\n                        "),i=p("p"),a=d(v),u=m(),w&&w.c(),y(o,"class","svelte-z3o7sv"),y(s,"class",g=c(["chat-message","You"===t[7].user?"user":"bot"].join(" "))+" svelte-z3o7sv"),y(e,"class","chat-message-wrapper svelte-z3o7sv")},m(t,c){h(t,e,c),l(e,s),l(s,o),l(o,n),l(s,r),l(s,i),l(i,a),l(s,u),w&&w.m(s,null)},p(t,e){2&e&&b!==(b=t[7].user+"")&&_(n,b),2&e&&v!==(v=t[7].text+"")&&_(a,v),t[7].video?w?w.p(t,e):(w=it(t),w.c(),w.m(s,null)):w&&(w.d(1),w=null),2&e&&g!==(g=c(["chat-message","You"===t[7].user?"user":"bot"].join(" "))+" svelte-z3o7sv")&&y(s,"class",g)},d(t){t&&f(e),w&&w.d()}}}function ut(t){let e;return{c(){e=p("div"),e.innerHTML='<div class="chat-message bot svelte-z3o7sv"><span class="svelte-z3o7sv">   ...   </span></div>',y(e,"class","chat-message-wrapper svelte-z3o7sv")},m(t,s){h(t,e,s)},d(t){t&&f(e)}}}function ct(e){let s,n,r,i,a,c,d,_,v,w,$,x,T,q,R,E,C,k,A=e[1],S=[];for(let t=0;t<A.length;t+=1)S[t]=at(rt(e,A,t));let j=e[0]&&ut();return{c(){s=p("div"),n=p("div"),r=p("div"),i=p("img"),c=m(),d=p("div"),d.textContent=`${e[3].name}`,_=m(),v=p("div"),w=p("div");for(let t=0;t<S.length;t+=1)S[t].c();$=m(),j&&j.c(),x=m(),T=p("div"),q=p("textarea"),R=m(),E=p("button"),E.textContent="=>",u(i.src,a=e[3].image)||y(i,"src",a),y(i,"alt","Bot"),y(i,"class","svelte-z3o7sv"),y(r,"class","chat-header-image svelte-z3o7sv"),y(d,"class","chat-header-info svelte-z3o7sv"),y(n,"class","chat-header svelte-z3o7sv"),y(w,"class","chat-content svelte-z3o7sv"),y(v,"class","chat-content-wrapper svelte-z3o7sv"),y(q,"class","chat-input svelte-z3o7sv"),y(E,"class","chat-submit svelte-z3o7sv"),y(T,"class","chat-footer svelte-z3o7sv"),y(s,"class","chat svelte-z3o7sv")},m(t,o){h(t,s,o),l(s,n),l(n,r),l(r,i),l(n,c),l(n,d),l(s,_),l(s,v),l(v,w);for(let t=0;t<S.length;t+=1)S[t].m(w,null);l(w,$),j&&j.m(w,null),l(s,x),l(s,T),l(T,q),b(q,e[2]),l(T,R),l(T,E),C||(k=[g(q,"input",e[6]),g(q,"keydown",e[5]),g(E,"click",e[4])],C=!0)},p(t,[e]){if(2&e){let s;for(A=t[1],s=0;s<A.length;s+=1){const o=rt(t,A,s);S[s]?S[s].p(o,e):(S[s]=at(o),S[s].c(),S[s].m(w,$))}for(;s<S.length;s+=1)S[s].d(1);S.length=A.length}t[0]?j||(j=ut(),j.c(),j.m(w,null)):j&&(j.d(1),j=null),4&e&&b(q,t[2])},i:t,o:t,d(t){t&&f(s),function(t,e){for(let s=0;s<t.length;s+=1)t[s]&&t[s].d(e)}(S,t),j&&j.d(),C=!1,o(k)}}}function lt(t,e,s){const o={name:"Max Mustermann",image:"https://i.ibb.co/d29TyqJ/man-wearing-headset-giving-online-chat-support-attractive-unshaven-young-offering-client-services-he.jpg",url:"https://dialogflow-backend.capr.hand.group"};let n=!1,r=[],i="";function a(){if(!i)return;const t=i;s(2,i=""),s(1,r=[...r,{user:"You",text:t}]),setTimeout((async()=>{s(0,n=!0);let e=(await nt.get(`${o.url}?query=${t}`).json()).queryResult.fulfillmentText,i=!1;e.match(/(?:https?|ftp):\/\/[\n\S]+/g)&&(i=e.match(/\bhttps?:\/\/\S+/gi)[0],e=e.replace(/(?:https?|ftp):\/\/[\n\S]+/g,"")),s(1,r=[...r,{user:o.name,text:e,video:i||!1}]),s(0,n=!1)}),500)}return[n,r,i,o,a,function(t){"Enter"===t.key&&(t.preventDefault(),a())},function(){i=this.value,s(2,i)}]}class ht extends L{constructor(t){super(),N(this,t,lt,ct,r,{})}}function ft(e){let s,o,n;return o=new ht({}),{c(){var t;s=p("main"),(t=o.$$.fragment)&&t.c(),y(s,"class","svelte-eld5wd")},m(t,e){h(t,s,e),P(o,s,null),n=!0},p:t,i(t){n||(z(o.$$.fragment,t),n=!0)},o(t){!function(t,e,s,o){if(t&&t.o){if(j.has(t))return;j.add(t),(void 0).c.push((()=>{j.delete(t),o&&(s&&t.d(1),o())})),t.o(e)}}(o.$$.fragment,t),n=!1},d(t){t&&f(s),U(o)}}}const pt=new class extends L{constructor(t){super(),N(this,t,null,ft,r,{})}}({target:document.body});return pt}();
//# sourceMappingURL=bundle.js.map
